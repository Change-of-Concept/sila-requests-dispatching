# sila-requests-dispatching

## Описание
Проект создан в рамках кейса "Автоматическая диспетчеризация заявок" от компании "СИЛА". Решение представляет собой 2 интерфейса:
- Веб-сервис
- API
Решение ускоряет работу сотрудника первой линии поддержки, автоматически размечая в обращении пользователя тип оборудования, точку отказа и серийный номер.

## Requirements
- OS: `Ubuntu` 
- Python: `3.11`
- Modules: `requirements.txt`

## Описание файлов и дерикторий
Проект имеет 2 интерфейса в заимодействия - API и веб-интерфейс (не зависят друг от друга).

```/core - содержит общие файлы проекта (запуск моделей, взаимодействие с БД, конфигурация и т.д.)
/datasets - содержит стартовый датасет и 2 аугментированных - для обучения классификации типа оборудования и для обучения классификации точки отказа
/models - содержит модели CatBoostClassifier в формате .cbm
/notebooks - содержит ноутбуки с обучением моделей
/pages - содержит страницы streamlit
.env - конфигурационный файл
api.py - API
webapp.py - Web-интерфейс
database.db - база данных sqlite3
requirements.txt - список зависимостей
```

## Инструкция по запуску
```sudo apt install make
make setup

Затем на выбор или всё сразу:
make webapp - для запуска веб-интерфейса
make api - для запуска api
```
## Что использовано в решении
Для обучения моделей данные были аугментированы при помощи LLM. 

Для извлечения признаков из текста используется модель `intfloat/multilingual-e5-large-instruct`. Полученные векторные представления подаются на модель классификации.

Для классификации используется модель градиентного бустинга CatBoostClassifier.

Для извлечения серийных номеров используется регулярное выражение

## API
Endpoint: `api/v1/submit_request`

Method: `POST`

Input: ```{
    "theme": [тема],
    "description": [описание]
}```

Output: ```{
    "hardware_type": {
        "value": [тип оборудования],
        "probability": [уверенность в ответе]
    },
    "request_type": {
        "value": [точка отказа],
        "probability": [уверенность в ответе]
    },
    "generation_time": время генерации,
    "serial_numbers": [
        "серийный номер 1",
        "серийный номер 2"
    ]
}```